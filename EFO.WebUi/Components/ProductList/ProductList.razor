@using EFO.WebUi.Data
@namespace EFO.WebUi.Components

<div class="container-fluid">
    <div class="row bg-dark text-light">
        <div class="col col-6 border-end py-2">Product</div>
        <div class="col col-2 border-end py-2">Price per Quantity</div>
        <div class="col col-2 border-end py-2">Quantity</div>
        <div class="col col-2 py-2"></div>
    </div>
    @for (var pIx = 0; pIx < Products.Count; ++pIx)
    {
        var product = Products[pIx];

        <ProductRow Product="product" OnAddToOrder="ProductRow_OnAddToOrderCallback"></ProductRow>
    }
</div>

@code {

    [Parameter]
    public IReadOnlyList<ProductDto> Products { get; set; } = Array.Empty<ProductDto>();

    [Parameter]
    public EventCallback<ProductAddedToOrderEventArgs> OnProductAddToOrder { get; set; }

    private void ProductRow_OnAddToOrderCallback(ProductRow obj)
    {
        OnProductAddToOrder.InvokeAsync(new ProductAddedToOrderEventArgs(obj.Product.ProductId, obj.Quantity));
    }
}
